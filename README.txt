# 📦 包材・完成品 在庫管理システム README

このシステムは、青果出荷に関わる包材や完成品の在庫を一括で管理・操作できるWebアプリケーションです。現場作業の効率化と履歴の可視化を目的とし、スマホからも操作できるUIとLINE通知、CSV連携などの拡張にも対応しています。

---

## 🛠 主な技術スタック
- Python + Flask（サーバーサイド）
- HTML + JavaScript（フロントエンド）
- PostgreSQL（Neon Cloud DB）
- Render（Webアプリホスティング）

---

## ✅ 実装済み機能一覧

### 📦 在庫管理
- 包材（袋・表シール・裏シール）・半完成品・完成品の在庫数を一元管理
- 入荷・棚卸し・使用・戻しなどの在庫変動をボタン操作で即時反映

### 📝 作業予定・作業ログ
- 完成品／半完成品の作業予定を登録し、完了時に在庫へ反映
- 作業完了後はログに記録され、履歴として閲覧可能

### 🏷 各種マスタ管理
- 包材、半完成品、完成品、作業者マスタをそれぞれCRUD対応

### 🚚 出荷管理
- 出荷予定のCSVインポート（完成品マスタと照合）
- 必要な裏貼り作業を自動で予定に追加

### 📥 包材入荷予定・履歴
- カテゴリ（袋／表／裏）から選択 → 数量＋コメントで予定追加
- 入荷完了時に在庫へ反映・履歴に記録（material_arrival_logs）

### 🧮 棚卸し管理・履歴
- 各アイテムの在庫数を手入力で修正 → 差分とコメントを記録
- stock_adjust_logs に自動記録され、一覧表示可能

---

## 🗂 データベース構成（抜粋）

- `inventory`：共通在庫テーブル（material_id / semi_product_id / finished_product_id いずれか）
- `stock_adjust_logs`：棚卸し履歴（inventory_id、before/after、item_type、コメント、日時）
- `material_arrival_logs`：包材入荷履歴（material_id、数量、コメント、日時）

---

## 🌐 画面構成（ナビメニュー）

### 🧾 1列目：操作系
- 📦 在庫一覧
- 📝 作業予定
- 🚚 出荷予定
- 📤 蔵出し
- 📥 包材入荷
- 🧮 棚卸し

### 🗃 2列目：マスタ管理
- 🏷 包材マスタ
- 🧩 半完成品マスタ
- 🎯 完成品マスタ
- 👤 作業者マスタ

### 🕒 3列目：履歴確認
- 📂 作業ログ
- 🧮 棚卸し履歴
- 📥 包材入荷履歴

---

## 🔄 今後追加予定 or 拡張候補
- 出荷実績入力・履歴管理
- 完成品バージョン管理（例：2024-1）
- 在庫アラート通知のFlask実装化（n8n→Flask）
- 作業記録CSV出力
- モバイルレイアウト最適化

---

## 🚀 起動方法（開発環境）
```bash
# 環境準備
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# 実行
python app.py
```

---

## 📩 問い合わせ
システム改善案・バグ報告などあれば、開発者までお気軽に！

